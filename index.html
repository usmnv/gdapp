<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Dragon</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --bg-color: var(--tg-theme-bg-color, #ffffff);
            --text-color: var(--tg-theme-text-color, #000000);
            --hint-color: var(--tg-theme-hint-color, #999999);
            --button-color: var(--tg-theme-button-color, #40a7e3);
            --button-text-color: var(--tg-theme-button-text-color, #ffffff);
            --secondary-bg-color: var(--tg-theme-secondary-bg-color, #f4f4f5);
            --accent-color: #d4af37;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 16px;
            padding-bottom: 80px;
            line-height: 1.5;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .header h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .customer-code {
            background: var(--secondary-bg-color);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        .card {
            background-color: var(--secondary-bg-color);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 16px;
        }
        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .stats-grid {
            display: flex;
            gap: 12px;
            margin: 20px 0;
        }
        .stat-item {
            flex: 1;
            background: var(--bg-color);
            border-radius: 16px;
            padding: 16px 8px;
            text-align: center;
        }
        .stat-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        .stat-value {
            font-size: 22px;
            font-weight: 700;
        }
        .stat-label {
            font-size: 12px;
            color: var(--hint-color);
        }
        .button {
            background-color: var(--button-color);
            color: var(--button-text-color);
            border: none;
            border-radius: 14px;
            padding: 16px;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: opacity 0.2s;
            margin-top: 16px;
        }
        .button:hover {
            opacity: 0.9;
        }
        .currency-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
        }
        .currency-table th {
            text-align: left;
            padding: 12px 8px;
            color: var(--hint-color);
            font-weight: 500;
            font-size: 14px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        .currency-table td {
            padding: 12px 8px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        .currency-flag {
            font-size: 20px;
            margin-right: 8px;
        }
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--bg-color);
            border-top: 1px solid rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-around;
            padding: 10px 0 12px;
            backdrop-filter: blur(10px);
            z-index: 10;
        }
        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--hint-color);
            font-size: 12px;
            cursor: pointer;
            transition: color 0.2s;
            flex: 1;
        }
        .tab-item.active {
            color: var(--button-color);
        }
        .tab-icon {
            font-size: 24px;
        }
        .services-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        .service-card {
            background: var(--secondary-bg-color);
            border-radius: 16px;
            padding: 16px;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .service-card:active {
            transform: scale(0.98);
        }
        .service-icon {
            font-size: 28px;
            margin-bottom: 10px;
            color: var(--accent-color);
        }
        .service-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        .service-desc {
            font-size: 13px;
            color: var(--hint-color);
        }
        .input-group {
            margin-bottom: 16px;
        }
        .input-label {
            display: block;
            font-size: 14px;
            color: var(--hint-color);
            margin-bottom: 6px;
        }
        .input-field, .input-select {
            width: 100%;
            padding: 16px;
            border: 1px solid rgba(0,0,0,0.05);
            border-radius: 16px;
            font-size: 16px;
            background: var(--bg-color);
            color: var(--text-color);
        }
        .input-select {
            appearance: none;
            background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23999' stroke-width='2'><polyline points='6 9 12 15 18 9'/></svg>");
            background-repeat: no-repeat;
            background-position: right 16px center;
        }
        .converter-block {
            background: var(--secondary-bg-color);
            border-radius: 20px;
            padding: 20px;
            margin-top: 16px;
        }
        .converter-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        .converter-amount {
            flex: 2;
        }
        .converter-currency {
            flex: 1;
        }
        .converter-equal {
            text-align: center;
            font-size: 20px;
            color: var(--hint-color);
            margin: 8px 0;
        }
        .profile-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 30px;
            background: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: white;
            cursor: pointer;
        }
        .profile-info h2 {
            font-size: 22px;
            font-weight: 600;
        }
        .profile-info p {
            color: var(--hint-color);
        }
        .profile-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }
        .profile-grid-item {
            background: var(--secondary-bg-color);
            border-radius: 16px;
            padding: 16px 8px;
            text-align: center;
            cursor: pointer;
        }
        .profile-grid-item i {
            font-size: 24px;
            color: var(--accent-color);
            margin-bottom: 8px;
        }
        .profile-grid-item span {
            display: block;
            font-weight: 600;
        }
        .profile-menu-item {
            display: flex;
            align-items: center;
            padding: 16px;
            background: var(--secondary-bg-color);
            border-radius: 16px;
            margin-bottom: 8px;
            cursor: pointer;
        }
        .profile-menu-item i {
            width: 24px;
            font-size: 18px;
            color: var(--accent-color);
            margin-right: 16px;
        }
        .support-section {
            margin-top: 24px;
        }
        .support-title {
            font-weight: 600;
            margin-bottom: 12px;
        }
        .back-button {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            cursor: pointer;
            color: var(--button-color);
            font-weight: 600;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .page-content {
            display: none;
        }
        .page-content.active {
            display: block;
        }
        .currency-switch {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }
        .currency-switch button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 30px;
            background: var(--secondary-bg-color);
            color: var(--text-color);
            font-weight: 600;
            cursor: pointer;
        }
        .currency-switch button.active {
            background: var(--button-color);
            color: var(--button-text-color);
        }
        .avatar-selector {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin: 20px 0;
        }
        .avatar-option {
            width: 70px;
            height: 70px;
            border-radius: 35px;
            background: var(--secondary-bg-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            cursor: pointer;
            border: 3px solid transparent;
        }
        .avatar-option.selected {
            border-color: var(--button-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üêâ Golden Dragon</h1>
            <div class="customer-code" id="customerCode">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <!-- –ì–ª–∞–≤–Ω–∞—è -->
        <div id="homeTab" class="tab-content active">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <span style="font-size: 20px; font-weight: 600;" id="greeting">üëã –ü—Ä–∏–≤–µ—Ç, –ö–ª–∏–µ–Ω—Ç!</span>
                    <span style="color: var(--hint-color);">–ë–∞–ª–∞–Ω—Å: <strong id="balance">12500 ‚ÇΩ</strong></span>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-icon">üì¶</div>
                        <div class="stat-value" id="ordersCount">3</div>
                        <div class="stat-label">–ó–∞–∫–∞–∑—ã</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="deliveredCount">1</div>
                        <div class="stat-label">–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-value" id="usdRate">95</div>
                        <div class="stat-label">USD</div>
                    </div>
                </div>
                <button class="button" id="myOrdersBtn">üìã –ú–æ–∏ –∑–∞–∫–∞–∑—ã</button>
            </div>
            <div class="card">
                <div class="card-title">üí± –ö—É—Ä—Å –≤–∞–ª—é—Ç</div>
                <table class="currency-table">
                    <thead><tr><th>–í–∞–ª—é—Ç–∞</th><th>–ü–æ–∫—É–ø–∫–∞</th><th>–ü—Ä–æ–¥–∞–∂–∞</th></tr></thead>
                    <tbody id="currencyRatesTable"></tbody>
                </table>
            </div>
        </div>

        <!-- –£—Å–ª—É–≥–∏ -->
        <div id="servicesTab" class="tab-content">
            <h2 style="margin-bottom: 16px;">üöö –ù–∞—à–∏ —É—Å–ª—É–≥–∏</h2>
            <div class="services-grid" id="servicesGrid"></div>
        </div>

        <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä -->
        <div id="calcTab" class="tab-content">
            <h2 style="margin-bottom: 16px;">üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
            <div class="card">
                <div class="input-group">
                    <label class="input-label">–°—Ç—Ä–∞–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                    <select class="input-select" id="deliveryCountry">
                        <option value="ru">–†–æ—Å—Å–∏—è</option>
                        <option value="tj">–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω</option>
                        <option value="kz">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</option>
                        <option value="uz">–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</option>
                    </select>
                </div>
                <div class="input-group">
                    <label class="input-label">–¢–∏–ø —Ç–æ–≤–∞—Ä–∞</label>
                    <select class="input-select" id="goodsType">
                        <option value="1.0">–û–±—ã—á–Ω—ã–π (1.0x)</option>
                        <option value="1.2">–•—Ä—É–ø–∫–∏–π (1.2x)</option>
                        <option value="0.9">–û–¥–µ–∂–¥–∞ (0.9x)</option>
                        <option value="1.5">–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ (1.5x)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label class="input-label">–í–µ—Å (–∫–≥)</label>
                    <input type="number" class="input-field" id="weight" value="5" step="0.1">
                </div>
                <div class="input-group">
                    <label class="input-label">–û–±—ä—ë–º (–º¬≥) - –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</label>
                    <input type="number" class="input-field" id="volume" step="0.01">
                </div>
                <div class="input-group">
                    <label class="input-label">–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                    <select class="input-select" id="deliveryMethod">
                        <option value="avia">–ê–≤–∏–∞</option>
                        <option value="auto">–ê–≤—Ç–æ</option>
                        <option value="rail">–ñ/–î</option>
                    </select>
                </div>
                <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                    <input type="checkbox" id="insurance"> <span>–°—Ç—Ä–∞—Ö–æ–≤–∫–∞ (+5$)</span>
                </label>
                <button class="button" onclick="calculateDelivery()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                <div id="calcResult" style="margin-top: 20px; font-size: 20px; font-weight: 700; text-align: center;"></div>
            </div>
        </div>

        <!-- –í–∞–ª—é—Ç–∞ -->
        <div id="currencyTab" class="tab-content">
            <div class="currency-switch">
                <button id="showRatesBtn" class="active">–í–∞–ª—é—Ç—ã</button>
                <button id="showConverterBtn">–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä</button>
            </div>
            <div id="ratesSection">
                <div class="card" style="max-height: 400px; overflow-y: auto;">
                    <table class="currency-table">
                        <thead><tr><th>–í–∞–ª—é—Ç–∞</th><th>–ü–æ–∫—É–ø–∫–∞</th><th>–ü—Ä–æ–¥–∞–∂–∞</th></tr></thead>
                        <tbody id="allRatesTable"></tbody>
                    </table>
                </div>
            </div>
            <div id="converterSection" style="display: none;">
                <div class="converter-block">
                    <div class="converter-row">
                        <div class="converter-amount">
                            <label class="input-label">–£ –≤–∞—Å –µ—Å—Ç—å</label>
                            <input type="number" id="fromAmount" class="input-field" value="1" step="0.01">
                        </div>
                        <div class="converter-currency">
                            <label class="input-label">–í–∞–ª—é—Ç–∞</label>
                            <select id="fromCurrency" class="input-select"></select>
                        </div>
                    </div>
                    <div class="converter-equal">‚âà</div>
                    <div class="converter-row">
                        <div class="converter-amount">
                            <label class="input-label">–£ –≤–∞—Å –±—É–¥–µ—Ç</label>
                            <input type="number" id="toAmount" class="input-field" readonly value="0">
                        </div>
                        <div class="converter-currency">
                            <label class="input-label">–í–∞–ª—é—Ç–∞</label>
                            <select id="toCurrency" class="input-select"></select>
                        </div>
                    </div>
                    <p id="converterRate" style="text-align: center; margin-top: 16px; color: var(--hint-color);"></p>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <div id="profileTab" class="tab-content">
            <!-- –ú–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è -->
            <div id="profileMenu" class="page-content active">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">üë§</div>
                    <div class="profile-info">
                        <h2 id="profileName">usmnv</h2>
                        <p id="profileCode">1180975</p>
                    </div>
                </div>
                <div class="profile-grid">
                    <div class="profile-grid-item" data-page="orders"><i class="fas fa-box"></i><span>–ó–∞–∫–∞–∑—ã</span></div>
                    <div class="profile-grid-item" data-page="history"><i class="fas fa-history"></i><span>–ò—Å—Ç–æ—Ä–∏—è</span></div>
                    <div class="profile-grid-item" data-page="account"><i class="fas fa-wallet"></i><span>–°—á–µ—Ç</span></div>
                </div>
                <div class="profile-menu-item" data-page="pickup"><i class="fas fa-map-marker-alt"></i> –ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏</div>
                <div class="profile-menu-item" data-page="calculator"><i class="fas fa-calculator"></i> –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</div>
                <div class="profile-menu-item" data-page="settings"><i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                <div class="support-section">
                    <div class="support-title">–¶–µ–Ω—Ç—Ä –ø–æ–¥–¥–µ—Ä–∂–∫–∏</div>
                    <div class="profile-menu-item" data-page="contact"><i class="fas fa-headset"></i> –°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</div>
                    <div class="profile-menu-item" data-page="prohibited"><i class="fas fa-ban"></i> –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã</div>
                </div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ—Ñ–∏–ª—è -->
            <div id="ordersPage" class="page-content">
                <div class="back-button" onclick="showProfileMenu()"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
                <h2>üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>
                <div id="ordersList" class="card"></div>
            </div>
            <div id="historyPage" class="page-content">
                <div class="back-button" onclick="showProfileMenu()"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
                <h2>üìä –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
                <div class="card">–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏—Å—Ç–æ—Ä–∏—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π –∏ –ø–ª–∞—Ç–µ–∂–µ–π.</div>
            </div>
            <div id="accountPage" class="page-content">
                <div class="back-button" onclick="showProfileMenu()"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
                <h2>üí∞ –°—á–µ—Ç</h2>
                <div class="card">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: <strong id="accountBalance">12500 ‚ÇΩ</strong></div>
            </div>
            <div id="pickupPage" class="page-content">
                <div class="back-button" onclick="showProfileMenu()"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
                <h2>üìç –ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏</h2>
                <div id="pickupList" class="card"></div>
            </div>
            <div id="calculatorPage" class="page-content">
                <div class="back-button" onclick="showProfileMenu()"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
                <h2>üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
                <div class="card">(–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞)</div>
            </div>
            <div id="settingsPage" class="page-content">
                <div class="back-button" onclick="showProfileMenu()"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <div class="card">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div class="profile-avatar" id="settingsAvatar" style="width: 80px; height: 80px; font-size: 40px; margin: 0 auto;">üë§</div>
                        <div class="avatar-selector">
                            <div class="avatar-option" data-avatar="üë§" onclick="selectAvatar('üë§')">üë§</div>
                            <div class="avatar-option" data-avatar="üê±" onclick="selectAvatar('üê±')">üê±</div>
                            <div class="avatar-option" data-avatar="ü¶ä" onclick="selectAvatar('ü¶ä')">ü¶ä</div>
                            <div class="avatar-option" data-avatar="üêº" onclick="selectAvatar('üêº')">üêº</div>
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">–ò–º—è</label>
                        <input type="text" id="settingsName" class="input-field" value="usmnv">
                    </div>
                    <div class="input-group">
                        <label class="input-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                        <input type="tel" id="settingsPhone" class="input-field" value="+7 999 123 45 67" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä">
                    </div>
                    <div class="input-group">
                        <label class="input-label">–†–µ–≥–∏–æ–Ω (—Å—Ç—Ä–∞–Ω–∞)</label>
                        <select id="settingsCountry" class="input-select">
                            <option value="ru">–†–æ—Å—Å–∏—è</option>
                            <option value="tj">–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω</option>
                            <option value="kz">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</option>
                            <option value="uz">–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</option>
                        </select>
                    </div>
                    <button class="button" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
            <div id="contactPage" class="page-content">
                <div class="back-button" onclick="showProfileMenu()"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
                <h2>üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</h2>
                <div class="card" id="contactInfo"></div>
            </div>
            <div id="prohibitedPage" class="page-content">
                <div class="back-button" onclick="showProfileMenu()"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥</div>
                <h2>üö´ –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã</h2>
                <div class="card" id="prohibitedList"></div>
            </div>
            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π —É—Å–ª—É–≥–∏ -->
            <div id="serviceDetailPage" class="page-content">
                <div class="back-button" onclick="showServicesMenu()"><i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ —É—Å–ª—É–≥–∞–º</div>
                <h2 id="serviceDetailTitle"></h2>
                <div class="card" id="serviceDetailDesc"></div>
            </div>
        </div>
    </div>

    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="tab-bar">
        <div class="tab-item active" data-tab="home"><span class="tab-icon">üè†</span><span>–ì–ª–∞–≤–Ω–∞—è</span></div>
        <div class="tab-item" data-tab="services"><span class="tab-icon">üì¶</span><span>–£—Å–ª—É–≥–∏</span></div>
        <div class="tab-item" data-tab="calc"><span class="tab-icon">üßÆ</span><span>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</span></div>
        <div class="tab-item" data-tab="currency"><span class="tab-icon">üí±</span><span>–í–∞–ª—é—Ç–∞</span></div>
        <div class="tab-item" data-tab="profile"><span class="tab-icon">üë§</span><span>–ü—Ä–æ—Ñ–∏–ª—å</span></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            // ---------- Telegram Web App ----------
            const tg = window.Telegram?.WebApp;
            if (tg) {
                tg.expand();
                tg.ready();
            }

            // ---------- –ù–ê–°–¢–†–û–ô–ö–ò ----------
            // ‚ö†Ô∏è –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ô –ê–î–†–ï–° AMVERA
            const API_BASE = 'https://usmnv.pythonanywhere.com';
            const user = tg?.initDataUnsafe?.user;
            const USER_ID = user?.id; // –µ—Å–ª–∏ –Ω–µ –≤ Telegram ‚Äì undefined

            // ---------- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ----------
            let userData = {
                firstName: user?.first_name || '–ö–ª–∏–µ–Ω—Ç',
                customerCode: 'GD-1234',
                balance: 12500,
                ordersCount: 3,
                deliveredCount: 1,
                avatar: localStorage.getItem('userAvatar') || 'üë§',
                phone: localStorage.getItem('userPhone') || '+7 999 123 45 67',
                country: localStorage.getItem('userCountry') || 'ru'
            };
            let userOrders = [];
            let exchangeRates = [];

            // ---------- –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –° API ----------
            async function loadUserData() {
                if (!USER_ID) return;
                try {
                    const res = await fetch(`${API_BASE}/api/user/${USER_ID}`);
                    if (res.ok) {
                        const data = await res.json();
                        userData.customerCode = data.customer_code;
                        userData.balance = data.balance;
                        userData.ordersCount = data.orders_count;
                        userData.deliveredCount = data.delivered_count;
                    }
                } catch (e) {
                    console.warn('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', e);
                }
            }

            async function loadOrders() {
                if (!USER_ID) return;
                try {
                    const res = await fetch(`${API_BASE}/api/orders/${USER_ID}`);
                    if (res.ok) {
                        const data = await res.json();
                        userOrders = data.orders;
                    }
                } catch (e) {
                    console.warn('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤', e);
                }
            }

            async function loadExchangeRates() {
                try {
                    const res = await fetch(`${API_BASE}/api/exchange_rates`);
                    if (res.ok) {
                        const data = await res.json();
                        exchangeRates = data.rates;
                    }
                } catch (e) {
                    console.warn('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–æ–≤', e);
                }
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å—ë –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
            await Promise.all([loadUserData(), loadOrders(), loadExchangeRates()]);

            // ---------- –î–ê–ù–ù–´–ï –î–õ–Ø –û–°–¢–ê–õ–¨–ù–´–• –†–ê–ó–î–ï–õ–û–í ----------
            const mainCurrencies = exchangeRates.length ? exchangeRates.filter(c => ['USD','RUB','CNY'].includes(c.code)) : [
                { code: 'USD', flag: 'üá∫üá∏', name: 'USD', rate: 95 },
                { code: 'RUB', flag: 'üá∑üá∫', name: 'RUB', rate: 1 },
                { code: 'CNY', flag: 'üá®üá≥', name: 'CNY', rate: 13.5 }
            ];

            const services = [
                { icon: '‚úàÔ∏è', title: '–ê–≤–∏–∞ –¥–æ—Å—Ç–∞–≤–∫–∞', desc: '–ë—ã—Å—Ç—Ä–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ', fullDesc: '–ê–≤–∏–∞–ø–µ—Ä–µ–≤–æ–∑–∫–∞ –≥—Ä—É–∑–æ–≤ –æ—Ç 3 –¥–æ 7 –¥–Ω–µ–π.' },
                { icon: 'üöõ', title: '–ê–≤—Ç–æ –∫–∞—Ä–≥–æ', desc: '–û–ø—Ç–∏–º–∞–ª—å–Ω–æ –ø–æ —Ü–µ–Ω–µ', fullDesc: '–ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –æ—Ç 14 –¥–æ 21 –¥–Ω—è.' },
                { icon: 'üö¢', title: '–ú–æ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞', desc: '–î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤', fullDesc: '–ú–æ—Ä—Å–∫–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –æ—Ç 30 –¥–Ω–µ–π.' },
                { icon: 'üöÜ', title: '–ñ–î –¥–æ—Å—Ç–∞–≤–∫–∞', desc: '–°—Ç–∞–±–∏–ª—å–Ω–æ –∏ –≤—ã–≥–æ–¥–Ω–æ', fullDesc: '–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –æ—Ç 10 –¥–æ 15 –¥–Ω–µ–π.' },
                { icon: 'üìÑ', title: '–ë–µ–ª–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞', desc: '–° –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π', fullDesc: '–ü–æ–ª–Ω–æ–µ —Ç–∞–º–æ–∂–µ–Ω–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ.' },
                { icon: 'üì¶', title: '–§—É–ª—Ñ–∏–ª–º–µ–Ω—Ç', desc: '–•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è', fullDesc: '–ü—Ä–∏—ë–º, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, —É–ø–∞–∫–æ–≤–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞.' },
                { icon: '‚ö°', title: '–≠–∫—Å–ø—Ä–µ—Å—Å –¥–æ—Å—Ç–∞–≤–∫–∞', desc: '–î–æ–∫—É–º–µ–Ω—Ç–æ–≤', fullDesc: '–°—Ä–æ—á–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (1-2 –¥–Ω—è).' },
                { icon: 'üí∏', title: '–¢—Ä–∞–Ω—Å—Ñ–µ—Ä —Å—Ä–µ–¥—Å—Ç–≤', desc: '–û–ø–ª–∞—Ç–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º', fullDesc: '–ü–µ—Ä–µ–≤–æ–¥—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º –≤ –ö–∏—Ç–∞–µ.' },
                { icon: 'üè≠', title: '–°–∫–ª–∞–¥ –≤ –ò—É', desc: '–ü—Ä–∏—ë–º –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥—Ä—É–∑–æ–≤', fullDesc: '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ 5 –¥–Ω–µ–π.' },
                { icon: 'üõí', title: '–í—ã–∫—É–ø —Ç–æ–≤–∞—Ä–æ–≤', desc: '1688 / Alibaba / Taobao', fullDesc: '–ü–æ–º–æ—â—å –≤ –≤—ã–∫—É–ø–µ —Ç–æ–≤–∞—Ä–æ–≤.' },
                { icon: 'üì¶‚ú®', title: '–£–ø–∞–∫–æ–≤–∫–∞', desc: '–§–æ—Ç–æ –∏ –≤–∏–¥–µ–æ –æ—Ç—á—ë—Ç', fullDesc: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞.' },
                { icon: 'üîç', title: '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å', desc: '–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≥—Ä—É–∑–æ–º', fullDesc: 'Online‚Äë–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ.' }
            ];

            const pickupPoints = {
                ru: ['–ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, 1', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ù–µ–≤—Å–∫–∏–π –ø—Ä., 22', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –ö—Ä–∞—Å–Ω—ã–π –ø—Ä., 50'],
                tj: ['–î—É—à–∞–Ω–±–µ, –ø—Ä. –†—É–¥–∞–∫–∏, 10', '–•—É–¥–∂–∞–Ω–¥, —É–ª. –õ–µ–Ω–∏–Ω–∞, 5'],
                kz: ['–ê–ª–º–∞—Ç—ã, –ø—Ä. –ê–±–∞—è, 100', '–ù—É—Ä-–°—É–ª—Ç–∞–Ω, —É–ª. –ö–∞–±–∞–Ω–±–∞–π –±–∞—Ç—ã—Ä–∞, 15'],
                uz: ['–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ê–º–∏—Ä–∞ –¢–µ–º—É—Ä–∞, 30', '–°–∞–º–∞—Ä–∫–∞–Ω–¥, —É–ª. –†–µ–≥–∏—Å—Ç–∞–Ω, 2']
            };

            const contacts = {
                phone: '+7 (800) 123-45-67',
                email: 'support@golden-dragon.com',
                workTime: '–ü–Ω-–ü—Ç 9:00-21:00 –ú–°–ö',
                chat: '@goldendragon_support'
            };

            const prohibitedItems = [
                '–û—Ä—É–∂–∏–µ –∏ –±–æ–µ–ø—Ä–∏–ø–∞—Å—ã',
                '–ù–∞—Ä–∫–æ—Ç–∏—á–µ—Å–∫–∏–µ –≤–µ—â–µ—Å—Ç–≤–∞',
                '–í–∑—Ä—ã–≤—á–∞—Ç—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞',
                '–Ø–¥–æ–≤–∏—Ç—ã–µ –∏ —Ä–∞–¥–∏–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã',
                '–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–ª–ª—ã –≤ —Å–ª–∏—Ç–∫–∞—Ö',
                '–ñ–∏–≤—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ (–∫—Ä–æ–º–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π)',
                '–°–∫–æ—Ä–æ–ø–æ—Ä—Ç—è—â–∏–µ—Å—è –ø—Ä–æ–¥—É–∫—Ç—ã –±–µ–∑ —É–ø–∞–∫–æ–≤–∫–∏',
                '–ê–ª–∫–æ–≥–æ–ª—å –∏ —Ç–∞–±–∞–∫ —Å–≤–µ—Ä—Ö –Ω–æ—Ä–º—ã',
                '–õ–µ–∫–∞—Ä—Å—Ç–≤–∞ –±–µ–∑ —Ä–µ—Ü–µ–ø—Ç–∞',
                '–î–µ–Ω—å–≥–∏ –∏ —Ü–µ–Ω–Ω—ã–µ –±—É–º–∞–≥–∏'
            ];

            // ---------- –≠–õ–ï–ú–ï–ù–¢–´ ----------
            const customerCodeEl = document.getElementById('customerCode');
            const greetingEl = document.getElementById('greeting');
            const balanceEl = document.getElementById('balance');
            const ordersCountEl = document.getElementById('ordersCount');
            const deliveredCountEl = document.getElementById('deliveredCount');
            const profileNameEl = document.getElementById('profileName');
            const profileCodeEl = document.getElementById('profileCode');
            const profileAvatarEl = document.getElementById('profileAvatar');
            const settingsAvatarEl = document.getElementById('settingsAvatar');
            const accountBalanceEl = document.getElementById('accountBalance');
            const settingsNameEl = document.getElementById('settingsName');
            const settingsPhoneEl = document.getElementById('settingsPhone');
            const settingsCountryEl = document.getElementById('settingsCountry');

            function updateUserUI() {
                greetingEl.innerText = `üëã –ü—Ä–∏–≤–µ—Ç, ${userData.firstName}!`;
                customerCodeEl.innerText = userData.customerCode;
                balanceEl.innerText = userData.balance + ' ‚ÇΩ';
                ordersCountEl.innerText = userData.ordersCount;
                deliveredCountEl.innerText = userData.deliveredCount;
                profileNameEl.innerText = userData.firstName;
                profileCodeEl.innerText = userData.customerCode;
                profileAvatarEl.innerText = userData.avatar;
                settingsAvatarEl.innerText = userData.avatar;
                accountBalanceEl.innerText = userData.balance + ' ‚ÇΩ';
                settingsNameEl.value = userData.firstName;
                settingsPhoneEl.value = userData.phone;
                settingsCountryEl.value = userData.country;

                document.querySelectorAll('.avatar-option').forEach(opt => {
                    opt.classList.toggle('selected', opt.dataset.avatar === userData.avatar);
                });
            }

            // ---------- –í–ê–õ–Æ–¢–ù–´–ï –¢–ê–ë–õ–ò–¶–´ ----------
            function renderCurrencyTables() {
                const ratesTable = document.getElementById('currencyRatesTable');
                ratesTable.innerHTML = mainCurrencies.map(c => 
                    `<tr><td><span class="currency-flag">${c.flag}</span> ${c.name}</td><td>${(c.rate*0.98).toFixed(2)}</td><td>${(c.rate*1.02).toFixed(2)}</td></tr>`
                ).join('');

                const allRatesTable = document.getElementById('allRatesTable');
                allRatesTable.innerHTML = (exchangeRates.length ? exchangeRates : allCurrenciesDemo).map(c => 
                    `<tr><td><span class="currency-flag">${c.flag}</span> ${c.name}</td><td>${(c.rate*0.98).toFixed(4)}</td><td>${(c.rate*1.02).toFixed(4)}</td></tr>`
                ).join('');

                const fromSelect = document.getElementById('fromCurrency');
                const toSelect = document.getElementById('toCurrency');
                const currencies = exchangeRates.length ? exchangeRates : allCurrenciesDemo;
                fromSelect.innerHTML = currencies.map(c => `<option value="${c.rate}" data-code="${c.code}">${c.flag} ${c.code}</option>`).join('');
                toSelect.innerHTML = currencies.map(c => `<option value="${c.rate}" data-code="${c.code}">${c.flag} ${c.code}</option>`).join('');
                fromSelect.value = currencies.find(c => c.code === 'USD')?.rate || 95;
                toSelect.value = currencies.find(c => c.code === 'EUR')?.rate || 105;
                updateConverter();
            }

            // ---------- –ó–ê–ü–û–õ–ù–ï–ù–ò–ï –£–°–õ–£–ì ----------
            const servicesGrid = document.getElementById('servicesGrid');
            services.forEach(s => {
                const card = document.createElement('div');
                card.className = 'service-card';
                card.innerHTML = `
                    <div class="service-icon">${s.icon}</div>
                    <div class="service-title">${s.title}</div>
                    <div class="service-desc">${s.desc}</div>
                `;
                card.addEventListener('click', () => showServiceDetail(s.title, s.fullDesc));
                servicesGrid.appendChild(card);
            });

            // ---------- –§–£–ù–ö–¶–ò–ò –î–õ–Ø –£–°–õ–£–ì ----------
            window.showServicesMenu = function() {
                document.querySelectorAll('#profileTab .page-content').forEach(p => p.classList.remove('active'));
                document.getElementById('profileMenu').classList.add('active');
            };
            window.showServiceDetail = function(title, desc) {
                document.querySelector('.tab-item[data-tab="profile"]').click();
                document.querySelectorAll('#profileTab .page-content').forEach(p => p.classList.remove('active'));
                const detailPage = document.getElementById('serviceDetailPage');
                detailPage.classList.add('active');
                document.getElementById('serviceDetailTitle').innerText = title;
                document.getElementById('serviceDetailDesc').innerText = desc;
            };

            // ---------- –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –¢–ê–ë–û–í ----------
            const tabs = document.querySelectorAll('.tab-item');
            const contents = {
                home: document.getElementById('homeTab'),
                services: document.getElementById('servicesTab'),
                calc: document.getElementById('calcTab'),
                currency: document.getElementById('currencyTab'),
                profile: document.getElementById('profileTab')
            };
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    Object.values(contents).forEach(c => c.classList.remove('active'));
                    if (contents[tabId]) contents[tabId].classList.add('active');
                    if (tabId === 'profile') showProfileMenu();
                });
            });

            // ---------- –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–¢–†–ê–ù–ò–¶–ê–ú–ò –ü–†–û–§–ò–õ–Ø ----------
            window.showProfileMenu = function() {
                document.querySelectorAll('#profileTab .page-content').forEach(p => p.classList.remove('active'));
                document.getElementById('profileMenu').classList.add('active');
            };
            window.showProfilePage = function(pageId) {
                document.querySelectorAll('#profileTab .page-content').forEach(p => p.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
            };

            document.querySelectorAll('[data-page]').forEach(el => {
                el.addEventListener('click', function() {
                    const page = this.dataset.page;
                    if (page === 'calculator') {
                        document.querySelector('.tab-item[data-tab="calc"]').click();
                        return;
                    }
                    showProfilePage(page + 'Page');
                    if (page === 'pickup') {
                        const points = pickupPoints[userData.country] || pickupPoints.ru;
                        document.getElementById('pickupList').innerHTML = points.map(p => `<div>üìç ${p}</div>`).join('');
                    } else if (page === 'contact') {
                        document.getElementById('contactInfo').innerHTML = `
                            üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${contacts.phone}<br>
                            üìß Email: ${contacts.email}<br>
                            ‚è∞ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ${contacts.workTime}<br>
                            üí¨ –ß–∞—Ç: ${contacts.chat}
                        `;
                    } else if (page === 'prohibited') {
                        document.getElementById('prohibitedList').innerHTML = prohibitedItems.map(i => `<div>üö´ ${i}</div>`).join('');
                    } else if (page === 'orders') {
                        const ordersList = document.getElementById('ordersList');
                        if (userOrders.length) {
                            ordersList.innerHTML = userOrders.map(o => `
                                <div style="display:flex; justify-content:space-between; margin-bottom:12px;">
                                    <span style="font-family:monospace;">${o.track_code}</span>
                                    <span style="color:${o.status === '–î–æ—Å—Ç–∞–≤–ª–µ–Ω' ? '#4CAF50' : '#FFC107'};">${o.status}</span>
                                </div>
                            `).join('');
                        } else {
                            ordersList.innerHTML = '–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤';
                        }
                    }
                });
            });

            // ---------- –ö–ù–û–ü–ö–ê "–ú–û–ò –ó–ê–ö–ê–ó–´" ----------
            document.getElementById('myOrdersBtn').addEventListener('click', () => {
                document.querySelector('.tab-item[data-tab="profile"]').click();
                showProfilePage('ordersPage');
            });

            // ---------- –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –í–ù–£–¢–†–ò –í–ê–õ–Æ–¢ ----------
            const showRatesBtn = document.getElementById('showRatesBtn');
            const showConverterBtn = document.getElementById('showConverterBtn');
            const ratesSection = document.getElementById('ratesSection');
            const converterSection = document.getElementById('converterSection');
            showRatesBtn.addEventListener('click', () => {
                showRatesBtn.classList.add('active');
                showConverterBtn.classList.remove('active');
                ratesSection.style.display = 'block';
                converterSection.style.display = 'none';
            });
            showConverterBtn.addEventListener('click', () => {
                showConverterBtn.classList.add('active');
                showRatesBtn.classList.remove('active');
                ratesSection.style.display = 'none';
                converterSection.style.display = 'block';
            });

            // ---------- –ö–û–ù–í–ï–†–¢–ï–† ----------
            function updateConverter() {
                const fromAmount = parseFloat(document.getElementById('fromAmount').value) || 0;
                const fromRate = parseFloat(document.getElementById('fromCurrency').value) || 1;
                const toRate = parseFloat(document.getElementById('toCurrency').value) || 1;
                const result = (fromAmount * fromRate) / toRate;
                document.getElementById('toAmount').value = result.toFixed(2);
                const fromCode = document.getElementById('fromCurrency').selectedOptions[0]?.dataset.code || '?';
                const toCode = document.getElementById('toCurrency').selectedOptions[0]?.dataset.code || '?';
                document.getElementById('converterRate').innerText = `1 ${fromCode} = ${(fromRate/toRate).toFixed(4)} ${toCode}`;
            }
            document.getElementById('fromAmount').addEventListener('input', updateConverter);
            document.getElementById('fromCurrency').addEventListener('change', updateConverter);
            document.getElementById('toCurrency').addEventListener('change', updateConverter);
            updateConverter();

            // ---------- –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ----------
            window.calculateDelivery = function() {
                const country = document.getElementById('deliveryCountry').value;
                const goodsType = parseFloat(document.getElementById('goodsType').value) || 1;
                const weight = parseFloat(document.getElementById('weight').value) || 0;
                const volume = parseFloat(document.getElementById('volume').value) || 0;
                const method = document.getElementById('deliveryMethod').value;
                const insurance = document.getElementById('insurance').checked ? 5 : 0;

                let basePrice = 5;
                if (country === 'tj') basePrice = 6;
                else if (country === 'kz') basePrice = 4.5;
                else if (country === 'uz') basePrice = 5.5;

                let methodCoeff = 1;
                if (method === 'avia') methodCoeff = 2;
                else if (method === 'rail') methodCoeff = 1.2;

                let total = weight * basePrice * goodsType * methodCoeff + volume * 20 + insurance;
                document.getElementById('calcResult').innerHTML = `üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${total.toFixed(2)} $`;
            };

            // ---------- –ù–ê–°–¢–†–û–ô–ö–ò ----------
            window.selectAvatar = function(avatar) {
                userData.avatar = avatar;
                localStorage.setItem('userAvatar', avatar);
                document.querySelectorAll('.avatar-option').forEach(opt => opt.classList.remove('selected'));
                event.target.classList.add('selected');
                profileAvatarEl.innerText = avatar;
                settingsAvatarEl.innerText = avatar;
            };
            window.saveSettings = function() {
                const newName = settingsNameEl.value.trim();
                const newPhone = settingsPhoneEl.value.trim();
                const newCountry = settingsCountryEl.value;
                if (newName) {
                    userData.firstName = newName;
                    localStorage.setItem('userName', newName);
                }
                if (newPhone) {
                    userData.phone = newPhone;
                    localStorage.setItem('userPhone', newPhone);
                }
                userData.country = newCountry;
                localStorage.setItem('userCountry', newCountry);
                updateUserUI();
                alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
                showProfileMenu();
            };

            // ---------- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ----------
            // –î–µ–º–æ-–≤–∞–ª—é—Ç—ã –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ API –Ω–µ –≤–µ—Ä–Ω—É–ª –¥–∞–Ω–Ω—ã–µ
            const allCurrenciesDemo = [
                { code: 'USD', flag: 'üá∫üá∏', name: 'USD', rate: 95 },
                { code: 'EUR', flag: 'üá™üá∫', name: 'EUR', rate: 105 },
                { code: 'CNY', flag: 'üá®üá≥', name: 'CNY', rate: 13.5 },
                { code: 'RUB', flag: 'üá∑üá∫', name: 'RUB', rate: 1 },
                { code: 'KZT', flag: 'üá∞üáø', name: 'KZT', rate: 0.21 },
                { code: 'UZS', flag: 'üá∫üáø', name: 'UZS', rate: 0.0075 },
                { code: 'TJS', flag: 'üáπüáØ', name: 'TJS', rate: 8.5 }
            ];

            renderCurrencyTables();
            updateUserUI();
        });
    </script>
</body>
</html>